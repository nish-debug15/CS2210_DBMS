CREATE DATABASE UNIDB;
USE UNIDB;

CREATE TABLE DEPARTMENT(
DEPTID INT PRIMARY KEY,
DEPTNAME VARCHAR(20));

CREATE TABLE STUDENT(
USN VARCHAR(10) PRIMARY KEY,
SNAME VARCHAR(20) NOT NULL,
DEPTID INT,
DOB DATE,
FOREIGN KEY (DEPTID) REFERENCES DEPARTMENT(DEPTID));

CREATE TABLE COURSE(
COURSEID VARCHAR(10) PRIMARY KEY,
COURSENAME VARCHAR(20) NOT NULL,
CREDITS INT,
DEPTID INT,
FOREIGN KEY (DEPTID) REFERENCES DEPARTMENT(DEPTID));

CREATE TABLE COURSEREG(
USN VARCHAR(20),
COURSEID VARCHAR(10),
PRIMARY KEY (USN, COURSEID));

ALTER TABLE COURSEREG
ADD SEM INT;

DESCRIBE COURSEREG;

ALTER TABLE COURSEREG
ADD FOREIGN KEY (USN) REFERENCES STUDENT(USN);

ALTER TABLE COURSEREG
ADD FOREIGN KEY (COURSEID) REFERENCES COURSE(COURSEID);

CREATE TABLE MARKS(
USN VARCHAR(20),
SCORE INT,
COURSEID VARCHAR(10),
FOREIGN KEY (USN) REFERENCES STUDENT(USN),
FOREIGN KEY (COURSEID) REFERENCES COURSE(COURSEID));

INSERT INTO DEPARTMENT VALUES(1, 'PHYSICS');
INSERT INTO DEPARTMENT VALUES(2, 'COMPUTER SCIENCE');

INSERT INTO STUDENT VALUES('24BSC101', 'JAMES BOND', '2', '2006-01-12'),
('24BSC102', 'JASON ROY', '1', '2002-06-22');

INSERT INTO COURSE VALUES('PH2021', 'QUANTUM MECHANICS', '3', '1'),
('CS1088', 'DATABASE SYSTEMS', '2', '2');

INSERT INTO COURSEREG VALUES('24BSC101', 'PH2021', '2'),
('24BSC102', 'CS1088', '3');

INSERT INTO MARKS VALUES('24BSC101', '55', 'PH2021'),
('24BSC102', '68', 'CS1088');


INSERT INTO Department VALUES
(3,'Math'),
(4,'Chem'),
(5,'Bio');

INSERT INTO Student VALUES
('24BSC103','Rahul Verma',3,'2003-07-15'),
('24BSC104','Shreya Das',4,'2002-02-18'),
('24BSC105','Priya Nair',5,'2001-09-05');

INSERT INTO Course VALUES
('CS203','Linear Algebra',3,3),
('CS204','Organic Chem',4,4),
('CS205','Genetics',3,5);

INSERT INTO CourseReg VALUES
('24BSC103','CS203',4),
('24BSC104','CS204',4),
('24BSC105','CS205',5);

INSERT INTO Marks VALUES
('24BSC103',76,'CS203'),
('24BSC104',88,'CS204'),
('24BSC105',81, 'CS205');

SELECT * FROM DEPARTMENT;
SELECT * FROM STUDENT;
SELECT * FROM COURSE;
SELECT * FROM COURSEREG;
SELECT * FROM MARKS;

-- Absolute values
SELECT USN, ABS(SCORE - 100) AS MARKSFROMFULL
FROM MARKS;

-- Round score to nearest 5
SELECT USN, ROUND(SCORE, -1) AS ROUNDEDSCORE
FROM MARKS;

-- Square of score 
SELECT USN, POWER(SCORE,2) AS SCORESQUARE
FROM MARKS;

-- Remainder when divided by 10(last digit check)
SELECT USN, MOD(SCORE, 10) AS LASTDIGIT
FROM MARKS;

-- Average marks
SELECT AVG(SCORE) AS AVERAGESCORE FROM MARKS;

-- Highest & lowest marks
SELECT MAX(SCORE) AS HIGHESTSCORE, MIN(SCORE) AS LOWESTSCORE FROM MARKS;

-- Count of students
SELECT COUNT(DISTINCT USN) AS STUDCOUNT FROM MARKS;

-- Join
SELECT SNAME, COURSEID
FROM STUDENT s, COURSEREG c
WHERE s.USN = c.USN;

-- Avg marks per course
SELECT COURSEID, AVG(SCORE) AS AVGPERCOURSE
FROM MARKS
GROUP BY COURSEID;

-- Total marks of each student
SELECT USN, SUM(Score) AS TotalScore
FROM Marks
GROUP BY USN;

/*AVG → class average calculation.

MAX/MIN → find topper & weakest student.

COUNT → attendance/participation stats.

GROUP BY → subject-wise reports.

SUM → cumulative scores.*/

-- Names in uppercase (for ID cards)
SELECT UPPER(SName) AS NameCaps FROM Student;

-- Names in lowercase (for email IDs)
SELECT LOWER(SName) AS EmailStyle FROM Student;

-- Length of names
SELECT SName, LENGTH(SName) AS NameLength FROM Student;

-- First 3 letters of each department (for short codes)
SELECT DeptName, SUBSTRING(DeptName,1,3) AS DeptCode
FROM Department;

-- Concatenate student name with department
SELECT CONCAT(SName,' - ',DeptName) AS StudentDept
FROM Student S
JOIN Department D ON S.DeptID=D.DeptID;

-- Trim spaces (useful in messy inputs)
SELECT TRIM('   SQL   ') AS TrimmedResult;

/*Applications:

UPPER/LOWER → standardizing text.

LENGTH → validation checks (e.g., name > 2 characters).

SUBSTRING → department codes (CSE, PHY).

CONCAT → formatted reports (Ravi Kumar - Physics).

TRIM → cleaning user-entered data.*/





